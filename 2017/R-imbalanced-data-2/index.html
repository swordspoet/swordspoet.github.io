<!DOCTYPE html>













<html class="theme-next mist" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">









  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



















  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Source Han Sans:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">



  <meta name="msapplication-config" content="/images/browserconfig.xml">







<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'X3YO6U1DRE',
      apiKey: '',
      indexName: 'blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="本文是处理不平衡数据系列之二，在上一篇文章中，我们完成了对数据的预处理、可视化以及模型训练与预测等等工作，对数据有了整体的认识。在对实验数据进行预处理的时候，缺失值（missing values）和高相关性变量（variables with high correlation）是重点关注的对象。解决了这两个问题后，数据集样本不平衡的缺陷仍旧没有根除，所以针对数据分别进行了上采样、下采样以及SMOT">
<meta name="keywords" content="数据分析,R,机器学习,Machine-Learning,xgboost,mlr,UCI">
<meta property="og:type" content="article">
<meta property="og:title" content="处理不平衡数据——基于UCI人口调查数据集（二）">
<meta property="og:url" content="https://www.libinx.com/2017/R-imbalanced-data-2/index.html">
<meta property="og:site_name" content="Thinking Realm">
<meta property="og:description" content="本文是处理不平衡数据系列之二，在上一篇文章中，我们完成了对数据的预处理、可视化以及模型训练与预测等等工作，对数据有了整体的认识。在对实验数据进行预处理的时候，缺失值（missing values）和高相关性变量（variables with high correlation）是重点关注的对象。解决了这两个问题后，数据集样本不平衡的缺陷仍旧没有根除，所以针对数据分别进行了上采样、下采样以及SMOT">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9gy1ff6pzp809jj20dw05wwg3.jpg">
<meta property="og:image" content="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9gy1ff3vmkjh80j203x01s0so.jpg">
<meta property="og:image" content="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9ly1ff6vxo7t8oj20zk0qojxg.jpg">
<meta property="og:updated_time" content="2021-03-23T01:25:10.972Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="处理不平衡数据——基于UCI人口调查数据集（二）">
<meta name="twitter:description" content="本文是处理不平衡数据系列之二，在上一篇文章中，我们完成了对数据的预处理、可视化以及模型训练与预测等等工作，对数据有了整体的认识。在对实验数据进行预处理的时候，缺失值（missing values）和高相关性变量（variables with high correlation）是重点关注的对象。解决了这两个问题后，数据集样本不平衡的缺陷仍旧没有根除，所以针对数据分别进行了上采样、下采样以及SMOT">
<meta name="twitter:image" content="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9gy1ff6pzp809jj20dw05wwg3.jpg">



  <link rel="alternate" href="/atom.xml" title="Thinking Realm" type="application/atom+xml">




  <link rel="canonical" href="https://www.libinx.com/2017/R-imbalanced-data-2/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>处理不平衡数据——基于UCI人口调查数据集（二） | Thinking Realm</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?29c6a6a7d4e694985b961f3ab9357bb3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        
        <span class="site-title">Thinking Realm</span>
        
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">311</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">19</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">154</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.libinx.com/2017/R-imbalanced-data-2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="H4ck3r L1">
      <meta itemprop="description" content="专注机器学习、大数据">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Thinking Realm">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">处理不平衡数据——基于UCI人口调查数据集（二）
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-02 15:15:23" itemprop="dateCreated datePublished" datetime="2017-05-02T15:15:23+08:00">2017-05-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2021-03-23 09:25:10" itemprop="dateModified" datetime="2021-03-23T09:25:10+08:00">2021-03-23</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">Machine-Learning</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <hr>
<p>本文是处理不平衡数据系列之二，在上一篇文章中，我们完成了对数据的预处理、可视化以及模型训练与预测等等工作，对数据有了整体的认识。在对实验数据进行预处理的时候，<font color="blue">缺失值（missing values）和高相关性变量（variables with high correlation）</font>是重点关注的对象。解决了这两个问题后，数据集样本不平衡的缺陷仍旧没有根除，所以针对数据分别进行了上采样、下采样以及SMOTE三种采样方法。显然，采样花费时间最久的SMOTE在模型中表现最佳，拿到了最高的准确率0.896，可是正当准备庆祝的时候，一个不幸的“消息”告诉我们：特异度（Specificity）只有0.254。也就是说，模型对预测收入高于5w的少数人群（minority class）表现不太好，这样的模型结果是不太令人满意的，能够拿到0.896的准确率自然也是在情理之中，毕竟正反样本的比例（96:4）摆在那里。为了克服这个缺陷，我们在R语言中采用了高效、性能强大的xgboost处理框架，最终得到理想的数据。</p>
<p>说句题外话，原本计划完成任务需花费10个番茄，实际耗时远远多出了预期的1倍多，整个五一就窝在实验室了。经过这个小小的项目后，深感“单兵作战”孤立无援的苦楚，唯有不断google，不断将写好的代码推倒重来，不断input、output······</p>
<a id="more"></a>
<blockquote>
<p>本项目github地址：<a href="https://github.com/swordspoet/UCI_imbalanced_data" target="_blank" rel="noopener">https://github.com/swordspoet/UCI_imbalanced_data</a></p>
</blockquote>
<ul>
<li>一、初次尝试xgboost<ul>
<li>xgboost模型参数解释与设定</li>
</ul>
</li>
<li>二、xgboost in mlr<ul>
<li>数据预处理</li>
<li>调参与模型训练</li>
</ul>
</li>
<li>参考链接</li>
</ul>
<h1 id="一、初次尝试xgboost"><a href="#一、初次尝试xgboost" class="headerlink" title="一、初次尝试xgboost"></a>一、初次尝试xgboost</h1><p>为了训练出一个能够在预测正负样本表现均良好的模型，在这篇文章中我们会用到xgboost算法，xgboost(eXtreme Gradient Boosting)的作者是华盛顿大学的<a href="http://homes.cs.washington.edu/~tqchen/" target="_blank" rel="noopener">陈天奇</a>，xgboost最大的特点在于，它能够自动利用CPU的多线程进行并行计算，同时在算法上加以改进提高了精度。随着越来越多的队伍借助xgboost取得了kaggle比赛中的胜利，xgboost在近年来变得十分流行。</p>
<p><img src="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9gy1ff6pzp809jj20dw05wwg3.jpg" alt="xgboost"></p>
<p>xgboost不仅被封装成了Python库，<a href="https://github.com/hetong007" target="_blank" rel="noopener">何通</a>制作了xgboost工具的R语言接口，所以R中安装后便可以直接使用。</p>
<p>照例，我们先对数据进行预处理，预处理的思路是：分别考虑训练集、测试集中的数值型变量和类别型变量，对数值型，剔除高度相关的变量，对类别型，剔除数据遗漏严重的变量。经过上述两个步骤后，再将<br>数值型和类别型变量重新组合。因为R对内存的要求太苛刻了，完成数据预处理后，还需要将<code>train,test,num_train,num_test,cat_train,cat_test</code>从RStudio中移除以减少内存占用，不然会出现内存不够的情况。以笔者8G内存的台式机器为例，本次实验中CPU与内存满负荷运算是常事，还出现几次假死、崩溃的情况，所以在R中进行数据处理的时候一定要注意内存的管理。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载包</span></span><br><span class="line"><span class="keyword">library</span>(caret)</span><br><span class="line"><span class="keyword">library</span>(data.table)</span><br><span class="line"><span class="keyword">library</span>(xgboost)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载数据集</span></span><br><span class="line">train &lt;- fread(<span class="string">"E:/R/imbalancedata/train.csv"</span>,na.string=c(<span class="string">""</span>,<span class="string">" "</span>,<span class="string">"?"</span>,<span class="string">"NA"</span>,<span class="literal">NA</span>)) </span><br><span class="line">test &lt;- fread(<span class="string">"E:/R/imbalancedata/test.csv"</span>,na.string=c(<span class="string">""</span>,<span class="string">" "</span>,<span class="string">"?"</span>,<span class="string">"NA"</span>,<span class="literal">NA</span>))</span><br><span class="line">table(is.na(train));table(is.na(test))</span><br><span class="line"><span class="comment"># 将train,test数据切分为数值型和类别型</span></span><br><span class="line">factcols &lt;- c(<span class="number">2</span>:<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>:<span class="number">16</span>,<span class="number">20</span>:<span class="number">29</span>,<span class="number">31</span>:<span class="number">38</span>,<span class="number">40</span>,<span class="number">41</span>)</span><br><span class="line">numcols &lt;- setdiff(<span class="number">1</span>:<span class="number">40</span>,factcols)</span><br><span class="line">cat_train &lt;- train[,factcols, with=<span class="literal">FALSE</span>];cat_test &lt;- test[,factcols,with=<span class="literal">FALSE</span>]</span><br><span class="line">num_train &lt;- train[,numcols,with=<span class="literal">FALSE</span>];num_test &lt;- test[,numcols,with=<span class="literal">FALSE</span>]</span><br><span class="line"><span class="comment"># 去掉数值型(num)数据中高度相关的变量</span></span><br><span class="line">ax &lt;- findCorrelation(cor(num_train), cutoff = <span class="number">0.7</span>)</span><br><span class="line">num_train &lt;- num_train[,-ax,with=<span class="literal">FALSE</span>];num_test &lt;- num_test[,-ax,with=<span class="literal">FALSE</span>]</span><br><span class="line"><span class="comment"># 处理类别型(cat)数据中的遗漏值</span></span><br><span class="line">mvtr &lt;- sapply(cat_train, <span class="keyword">function</span>(x)&#123;sum(is.na(x))/length(x)&#125;*<span class="number">100</span>)</span><br><span class="line">mvte &lt;- sapply(cat_test, <span class="keyword">function</span>(x)&#123;sum(is.na(x)/length(x))&#125;*<span class="number">100</span>)</span><br><span class="line"><span class="comment"># 将遗漏率小于5%的列单独挑选出来</span></span><br><span class="line">cat_train &lt;- subset(cat_train, select = mvtr &lt; <span class="number">5</span> )</span><br><span class="line">cat_test &lt;- subset(cat_test, select = mvte &lt; <span class="number">5</span>)</span><br><span class="line">cat_train[is.na(cat_train)] &lt;- <span class="string">"Missing"</span>;cat_test[is.na(cat_test)] &lt;- <span class="string">"Missing"</span> </span><br><span class="line"><span class="comment"># 合并数值型和分类型数据</span></span><br><span class="line">d_train &lt;- cbind(num_train, cat_train);d_test &lt;- cbind(num_test, cat_test)</span><br><span class="line">rm(train,test,num_train,num_test,cat_train,cat_test)</span><br></pre></td></tr></table></figure>
<h2 id="xgboost模型参数解释与设定"><a href="#xgboost模型参数解释与设定" class="headerlink" title="xgboost模型参数解释与设定"></a>xgboost模型参数解释与设定</h2><p>完成了数据预处理，接着便是分类模型的构建。在运行xgboost前，有三类参数需要人工设定： general parameters, booster parameters and task parameters，xgboost的<a href="http://xgboost.readthedocs.io/en/latest//parameter.html" target="_blank" rel="noopener">官方文档</a>有关于这些参数的详细解释：</p>
<blockquote>
<ul>
<li><strong>General parameters</strong> relates to which booster we are using to do boosting, commonly tree or linear model</li>
<li><strong>Booster parameters</strong> depends on which booster you have chosen</li>
<li><strong>Learning Task parameters</strong> that decides on the learning scenario, for example, regression tasks may use different parameters with ranking tasks</li>
</ul>
</blockquote>
<ol>
<li>Tree <strong>Booster</strong>参数解释：</li>
</ol>
<ul>
<li><strong>eta [default=0.3, alias: learning_rate]</strong><ul>
<li>学习率，防止模型出现过拟合，默认取0.3，通常取值范围[0.01,3]</li>
<li>在每次迭代后，变量的权重会随之衰减</li>
</ul>
</li>
<li><strong>gamma [default=0, alias: min_split_loss]</strong><ul>
<li>模型正则化系数，gamma越大，意味着模型越不容易出现过拟合</li>
</ul>
</li>
<li><strong>max_depth [default=6]</strong><ul>
<li>max_depth值越大，意味着模型越复杂，也越容易出现过拟合</li>
<li>max_depth的取值没有规定</li>
</ul>
</li>
<li><strong>min_child_weight [default=1]</strong><ul>
<li>In classification, if the leaf node has a minimum sum of instance weight (calculated by second order partial derivative) lower than min_child_weight, the tree splitting stops.</li>
</ul>
</li>
<li><strong>subsample[default=1][range: (0,1)]</strong><ul>
<li>It controls the number of samples (observations) supplied to a tree.</li>
<li>通常取值范围为 (0.5,0.8)</li>
</ul>
</li>
<li><strong>colsample_bytree[default=1][range: (0,1)]</strong><ul>
<li>It control the number of features (variables) supplied to a tree</li>
<li>通常取值范围为 (0.5,0.9)</li>
</ul>
</li>
</ul>
<ol>
<li><strong>Learning Task</strong>参数解释：</li>
</ol>
<ul>
<li><strong>Objective[default=reg:linear]</strong><ul>
<li>Objective规定模型需要处理的任务</li>
<li><code>reg:linear</code> - 线性回归</li>
<li><code>binary:logistic</code> - 二分类LR回归</li>
<li><code>multi:softmax</code> - 多分类softmax回归</li>
</ul>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&gt; tr_labels &lt;- d_train$income_level</span><br><span class="line">&gt; ts_labels &lt;- d_test$income_level</span><br><span class="line">&gt; new_tr &lt;- model.matrix(~.+<span class="number">0</span>,data = d_train[,-c(<span class="string">"income_level"</span>),with=<span class="literal">F</span>])</span><br><span class="line">&gt; new_ts &lt;- model.matrix(~.+<span class="number">0</span>,data = d_test[,-c(<span class="string">"income_level"</span>),with=<span class="literal">F</span>])</span><br><span class="line">&gt; tr_labels &lt;- as.numeric(tr_labels)-<span class="number">1</span></span><br><span class="line">&gt; ts_labels &lt;- as.numeric(ts_labels)-<span class="number">1</span></span><br><span class="line">&gt; dtrain &lt;- xgb.DMatrix(data = new_tr,label = tr_labels)</span><br><span class="line">&gt; dtest &lt;- xgb.DMatrix(data = new_ts,label= ts_labels)</span><br><span class="line">&gt; params &lt;- list(booster = <span class="string">"gbtree"</span>, </span><br><span class="line">+                objective = <span class="string">"binary:logistic"</span>, </span><br><span class="line">+                eta=<span class="number">0.3</span>, gamma=<span class="number">0</span>, max_depth=<span class="number">6</span>, </span><br><span class="line">+                min_child_weight=<span class="number">1</span>, subsample=<span class="number">1</span>, </span><br><span class="line">+                colsample_bytree=<span class="number">1</span>)</span><br><span class="line">&gt; xgbcv &lt;- xgb.cv( params = params, </span><br><span class="line">+                  data = dtrain, nrounds = <span class="number">100</span>, </span><br><span class="line">+                  nfold = <span class="number">5</span>, showsd = <span class="literal">T</span>, </span><br><span class="line">+                  stratified = <span class="literal">T</span>, print.every.n = <span class="number">10</span>,</span><br><span class="line">+                  early.stop.round = <span class="number">20</span>, maximize = <span class="literal">F</span>)</span><br><span class="line">[<span class="number">1</span>]	train-error:<span class="number">0.049454</span>+<span class="number">0.000231</span>	test-error:<span class="number">0.050275</span>+<span class="number">0.001244</span> </span><br><span class="line">Multiple eval metrics are present. Will use test_error <span class="keyword">for</span> early stopping.</span><br><span class="line">Will train until test_error hasn<span class="string">'t improved in 20 rounds.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[11]	train-error:0.045343+0.000408	test-error:0.046691+0.001152 </span></span><br><span class="line"><span class="string">[21]	train-error:0.042996+0.000356	test-error:0.045323+0.001094 </span></span><br><span class="line"><span class="string">[31]	train-error:0.041548+0.000311	test-error:0.044180+0.000912 </span></span><br><span class="line"><span class="string">[41]	train-error:0.040261+0.000405	test-error:0.043739+0.000868 </span></span><br><span class="line"><span class="string">[51]	train-error:0.039582+0.000303	test-error:0.043514+0.000995 </span></span><br><span class="line"><span class="string">[61]	train-error:0.038914+0.000295	test-error:0.043308+0.000788 </span></span><br><span class="line"><span class="string">[71]	train-error:0.038361+0.000195	test-error:0.043088+0.000858 </span></span><br><span class="line"><span class="string">[81]	train-error:0.037948+0.000252	test-error:0.043003+0.000837 </span></span><br><span class="line"><span class="string">[91]	train-error:0.037500+0.000189	test-error:0.042937+0.000921 </span></span><br><span class="line"><span class="string">[100]	train-error:0.037144+0.000316	test-error:0.043063+0.001010 </span></span><br><span class="line"><span class="string">Warning messages:</span></span><br><span class="line"><span class="string">1: '</span>print.every.n<span class="string">' is deprecated.</span></span><br><span class="line"><span class="string">Use '</span>print_every_n<span class="string">' instead.</span></span><br><span class="line"><span class="string">See help("Deprecated") and help("xgboost-deprecated"). </span></span><br><span class="line"><span class="string">2: '</span>early.stop.round<span class="string">' is deprecated.</span></span><br><span class="line"><span class="string">Use '</span>early_stopping_rounds<span class="string">' instead.</span></span><br><span class="line"><span class="string">See help("Deprecated") and help("xgboost-deprecated"). </span></span><br><span class="line"><span class="string">&gt; xgb1 &lt;- xgb.train (params = params, </span></span><br><span class="line"><span class="string">+                    data = dtrain, nrounds = 100, </span></span><br><span class="line"><span class="string">+                    watchlist = list(val=dtest,train=dtrain), </span></span><br><span class="line"><span class="string">+                    print.every.n = 10, </span></span><br><span class="line"><span class="string">+                    early.stop.round = 10, </span></span><br><span class="line"><span class="string">+                    maximize = F , eval_metric = "error")</span></span><br><span class="line"><span class="string">[1]	val-error:0.049758	train-error:0.049714 </span></span><br><span class="line"><span class="string">Multiple eval metrics are present. Will use train_error for early stopping.</span></span><br><span class="line"><span class="string">Will train until train_error hasn'</span>t improved <span class="keyword">in</span> <span class="number">10</span> rounds.</span><br><span class="line"></span><br><span class="line">[<span class="number">11</span>]	val-error:<span class="number">0.046511</span>	train-error:<span class="number">0.045644</span> </span><br><span class="line">[<span class="number">21</span>]	val-error:<span class="number">0.044937</span>	train-error:<span class="number">0.042993</span> </span><br><span class="line">[<span class="number">31</span>]	val-error:<span class="number">0.044396</span>	train-error:<span class="number">0.041504</span> </span><br><span class="line">[<span class="number">41</span>]	val-error:<span class="number">0.043915</span>	train-error:<span class="number">0.040777</span> </span><br><span class="line">[<span class="number">51</span>]	val-error:<span class="number">0.044205</span>	train-error:<span class="number">0.039835</span> </span><br><span class="line">[<span class="number">61</span>]	val-error:<span class="number">0.044486</span>	train-error:<span class="number">0.038888</span> </span><br><span class="line">[<span class="number">71</span>]	val-error:<span class="number">0.044917</span>	train-error:<span class="number">0.038467</span> </span><br><span class="line">[<span class="number">81</span>]	val-error:<span class="number">0.045007</span>	train-error:<span class="number">0.038166</span> </span><br><span class="line">[<span class="number">91</span>]	val-error:<span class="number">0.044797</span>	train-error:<span class="number">0.037890</span> </span><br><span class="line">[<span class="number">100</span>]	val-error:<span class="number">0.044917</span>	train-error:<span class="number">0.037665</span> </span><br><span class="line">Warning messages:</span><br><span class="line"><span class="number">1</span>: <span class="string">'print.every.n'</span> is deprecated.</span><br><span class="line">Use <span class="string">'print_every_n'</span> instead.</span><br><span class="line">See help(<span class="string">"Deprecated"</span>) and help(<span class="string">"xgboost-deprecated"</span>). </span><br><span class="line"><span class="number">2</span>: <span class="string">'early.stop.round'</span> is deprecated.</span><br><span class="line">Use <span class="string">'early_stopping_rounds'</span> instead.</span><br><span class="line">See help(<span class="string">"Deprecated"</span>) and help(<span class="string">"xgboost-deprecated"</span>). </span><br><span class="line">&gt; xgbpred &lt;- predict (xgb1,dtest)</span><br><span class="line">&gt; xgbpred &lt;- ifelse (xgbpred &gt; <span class="number">0.5</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line">&gt; <span class="keyword">library</span>(caret)</span><br><span class="line">&gt; confusionMatrix(xgbpred, ts_labels)</span><br><span class="line">Confusion Matrix and Statistics</span><br><span class="line"></span><br><span class="line">          Reference</span><br><span class="line">Prediction     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">         <span class="number">0</span> <span class="number">92366</span>  <span class="number">3271</span></span><br><span class="line">         <span class="number">1</span>  <span class="number">1210</span>  <span class="number">2915</span></span><br><span class="line">                                          </span><br><span class="line">               Accuracy : <span class="number">0.9551</span>          </span><br><span class="line">                 <span class="number">95</span>% CI : (<span class="number">0.9538</span>, <span class="number">0.9564</span>)</span><br><span class="line">    No Information Rate : <span class="number">0.938</span>           </span><br><span class="line">    P-Value [Acc &gt; NIR] : &lt; <span class="number">2.2e-16</span>       </span><br><span class="line">                                          </span><br><span class="line">                  Kappa : <span class="number">0.5427</span>          </span><br><span class="line"> Mcnemar<span class="string">'s Test P-Value : &lt; 2.2e-16       </span></span><br><span class="line"><span class="string">                                          </span></span><br><span class="line"><span class="string">            Sensitivity : 0.9871          </span></span><br><span class="line"><span class="string">            Specificity : 0.4712          </span></span><br><span class="line"><span class="string">         Pos Pred Value : 0.9658          </span></span><br><span class="line"><span class="string">         Neg Pred Value : 0.7067          </span></span><br><span class="line"><span class="string">             Prevalence : 0.9380          </span></span><br><span class="line"><span class="string">         Detection Rate : 0.9259          </span></span><br><span class="line"><span class="string">   Detection Prevalence : 0.9587          </span></span><br><span class="line"><span class="string">      Balanced Accuracy : 0.7291          </span></span><br><span class="line"><span class="string">                                          </span></span><br><span class="line"><span class="string">       '</span>Positive<span class="string">' Class : 0               </span></span><br><span class="line"><span class="string">                                          </span></span><br><span class="line"><span class="string">&gt; mat &lt;- xgb.importance (feature_names = colnames(new_tr),model = xgb1)</span></span><br><span class="line"><span class="string">&gt; xgb.plot.importance (importance_matrix = mat[1:20])</span></span><br></pre></td></tr></table></figure>
<p>其实，即使是给模型设定默认的参数也能得到意想不到的准确率，xgboost在kaggle社区中如此受欢迎也是有理由的。运行，训练模型（耗时约4分钟）并预测，模糊矩阵<code>confusionMatrix(xgbpred, ts_labels)</code>结果显示模型准确率达到了95.51%，然而这并不是重点。提升模型对预测收入高于5w的少数人群（minority class）的预测能力才是我们的目标，结果显示特异度（Specificity）达到47.12%，比上一个朴素贝叶斯提升了11.7%，效果仍然不是特别完美，不过也还可以了！无论是准确率还是其他衡量指标，xgboost得出的结果是全面优于之前的朴素贝叶斯模型的，那么还有没有提升的空间呢？</p>
<hr>
<h1 id="二、xgboost-in-mlr"><a href="#二、xgboost-in-mlr" class="headerlink" title="二、xgboost in mlr"></a>二、xgboost in mlr</h1><p><img src="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9gy1ff3vmkjh80j203x01s0so.jpg" alt="MLR"></p>
<p>2016年，R语言的用户迎来了<code>mlr</code>包的诞生，mlr，即machine learning in R。mlr是R语言中为专门应对机器学习问题而开发的包，在mlr出现之前，R语言中是不存在像Scikit-Learn这样的科学计算工具的。mlr包为在R中用机器学习方法解决问题提供了一套自有的框架，涵盖了分类、聚类、回归、生存分析等问题，另外mlr还为参数调优、预测结果分析、数据预处理等与机器学习相关的话题贡献了较为完整的方案。如果说，Scikit-Learn在Python的各个库之间不分伯仲，那么R语言的mlr就可谓一枝独秀。</p>
<p>说了这么多，如果对mlr感兴趣的同学可以去RStudio里一睹“真容”；mlr也专门为用户建立了一个教程网站：<a href="http://mlr-org.github.io/mlr-tutorial/devel/html/index.html" target="_blank" rel="noopener">Machine Learning in R: mlr Tutorial</a>，可以去官网找一个例子来跑一跑；这是mlr的<a href="https://github.com/mlr-org/mlr/" target="_blank" rel="noopener">github项目</a>，由于mlr的普及率还不算太高，官方文档也还在优化中，所以在google上找到关于mlr的资源还不是特别多，所以建议大家在使用过程中出现问题的话去项目中提issue或者在issue中找答案，这是最有效的办法！</p>
<p>在R语言中使用mlr包解决机器学习问题只需要牢记三个步骤即可：</p>
<ul>
<li>Create a Task：导入数据集，<strong>创建任务</strong>，可以是分类、回归、聚类等等</li>
<li>Make a Learner：<strong>构建模型</strong>，模型构建过程中涉及到参数设定、参数调节诸多技巧</li>
<li>Fit the model：拟合模型</li>
<li>Make predictions：预测</li>
</ul>
<p>在R中，变量可以归结为名义型、有序型、或连续型变量，类别（名义型）变量和有序类别（有序型）在R中称为因子（factor）。</p>
<blockquote>
<p>更多关于R语言数据结构的内容参见<a href="http://www.libinx.com/2016/11/13/2016-11-13-R-data-structure/">这篇文章</a>。</p>
</blockquote>
<p>值得注意的是mlr包对数据的格式是有要求的，mlr任务函数不接受字符型（char）变量，所以在构建任务函数前，必须确保将所有的变量转换为因子型（factor），作者的解释是</p>
<blockquote>
<p>All these things are possible pre-processors, which can be a model that wraps xgboost, when before doing train/predict, run the pre-processing and feed processed data to xgboost. So it is not hard.This is also reason why I do not explicit support factor in the tree construction algorithm. There could be many ways doing so, and in all the ways, having an algorithm optimized for sparse matrices is efficient for taking the processed data.<br>Normal tree growing algorithm only support dense numerical features, and have to support one-hot encoding factor explicitly for computation efficiency reason.</p>
</blockquote>
<p>在mlr中的xgboost，似乎并不需要进行太多的数据预处理，xgboost的作者回复<a href="https://github.com/dmlc/xgboost/issues/95" target="_blank" rel="noopener">issue</a>时是这样说的</p>
<blockquote>
<p>“….. xgboost treat every input feature as numerical, <strong>with support for missing values and sparsity</strong>. The decision is at the user<br>So if you want ordered variables, you can transform the variables into numerical levels(say age). Or if you prefer treat it as categorical variable, do one hot encoding.”</p>
</blockquote>
<p>也就是说xgboost视每个特征均为数值型，同时还支持遗漏变量和稀疏性数据，至于对数据进行何种预处理，决定权在用户手上。不同于之前，本次数据预处理仅仅是将字符型变量转换成因子，然后feed给mlr，mlr就直接开始创建任务（Create task）、构建模型（Make a learner）了，简单而且粗暴。</p>
<h2 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h2><p>下面，我们将使用mlr包继续提升模型的预测效果，照例首先加载数据和包。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 载入数据和包</span></span><br><span class="line">&gt; <span class="keyword">library</span>(data.table)</span><br><span class="line">data.table <span class="number">1.9</span><span class="number">.8</span></span><br><span class="line">  The fastest way to learn (by data.table authors): https://www.datacamp.com/courses/data-analysis-the-data-table-way</span><br><span class="line">  Documentation: ?data.table, example(data.table) and browseVignettes(<span class="string">"data.table"</span>)</span><br><span class="line">  Release notes, videos and slides: http://r-datatable.com</span><br><span class="line">&gt; <span class="keyword">library</span>(xgboost)</span><br><span class="line">Warning message:</span><br><span class="line">程辑包‘xgboost’是用R版本<span class="number">3.3</span><span class="number">.3</span> 来建造的 </span><br><span class="line">&gt; <span class="keyword">library</span>(caret)</span><br><span class="line">载入需要的程辑包：lattice</span><br><span class="line">载入需要的程辑包：ggplot2</span><br><span class="line"></span><br><span class="line">载入程辑包：‘caret’</span><br><span class="line">&gt; <span class="keyword">library</span>(mlr)</span><br><span class="line">载入需要的程辑包：ParamHelpers</span><br><span class="line">Warning messages:</span><br><span class="line"><span class="number">1</span>: 程辑包‘mlr’是用R版本<span class="number">3.3</span><span class="number">.3</span> 来建造的 </span><br><span class="line"><span class="number">2</span>: 程辑包‘ParamHelpers’是用R版本<span class="number">3.3</span><span class="number">.3</span> 来建造的 </span><br><span class="line">The following object is masked from ‘package:caret’:</span><br><span class="line"></span><br><span class="line">    train</span><br><span class="line"></span><br><span class="line">&gt; train &lt;- fread(<span class="string">"E:/R/imbalancedata/train.csv"</span>,na.string=c(<span class="string">""</span>,<span class="string">" "</span>,<span class="string">"?"</span>,<span class="string">"NA"</span>,<span class="literal">NA</span>))</span><br><span class="line">&gt; test &lt;- fread(<span class="string">"E:/R/imbalancedata/test.csv"</span>,na.string=c(<span class="string">""</span>,<span class="string">" "</span>,<span class="string">"?"</span>,<span class="string">"NA"</span>,<span class="literal">NA</span>))</span><br><span class="line">&gt; setDT(train)</span><br><span class="line">&gt; setDT(test)</span><br></pre></td></tr></table></figure>
<p>在加载包的时候需要<font color="blue">注意mlr和caret的加载顺序</font>，caret应该在mlr之前载入，否则训练模型的时候R不清楚到底是加载caret的train还是mlr的train，从而导致如下错误</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br></pre></td></tr></table></figure>
<p>一定要确保</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The following object is masked from ‘package:caret’:</span><br><span class="line"></span><br><span class="line">    train</span><br></pre></td></tr></table></figure>
<h2 id="调参与模型训练"><a href="#调参与模型训练" class="headerlink" title="调参与模型训练"></a>调参与模型训练</h2><p>在对模型进行训练时，R的运算速度一直是一个问题，其中一个就是只能使用单线程计算。但是R在2.14版本之后，R就内置了parallel包，强化了R的并行计算能力。parallel包可以很容易的在计算集群上实施并行计算，在多个CPU核心的单机上，也能发挥并行计算的功能。笔者用的计算机是4核i5-6600K的CPU与8G内存，即使是中端配置的机器也需要满负荷计算约一小时才能得到最优参数。</p>
<p><div><br><img src="http://raw.githubusercontent.com/swordspoet/i/img/778d5ca9ly1ff6vxo7t8oj20zk0qojxg.jpg" width="400"></div></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&gt; char_cols &lt;- colnames(train)[sapply(train,is.character)]</span><br><span class="line">&gt; <span class="keyword">for</span>(i <span class="keyword">in</span> char_cols) set(train,j=i,value = factor(train[[i]]))</span><br><span class="line">&gt; <span class="keyword">for</span>(i <span class="keyword">in</span> char_cols) set(test,j=i,value = factor(test[[i]]))</span><br><span class="line">&gt; train_task &lt;- makeClassifTask(data = train, target = <span class="string">"income_level"</span>)</span><br><span class="line">Warning <span class="keyword">in</span> makeTask(type = type, data = data, weights = weights, blocking = blocking,  :</span><br><span class="line">  Provided data is not a pure data.frame but from class data.table, hence it will be converted.</span><br><span class="line">&gt; test_task &lt;- makeClassifTask(data = test, target = <span class="string">"income_level"</span>)</span><br><span class="line">Warning <span class="keyword">in</span> makeTask(type = type, data = data, weights = weights, blocking = blocking,  :</span><br><span class="line">  Provided data is not a pure data.frame but from class data.table, hence it will be converted.</span><br><span class="line">&gt; train_task &lt;- createDummyFeatures(obj = train_task)</span><br><span class="line">&gt; train_task &lt;- createDummyFeatures(obj = train_task)</span><br><span class="line">&gt; set.seed(<span class="number">2002</span>)</span><br><span class="line">&gt; xgb_learner &lt;- makeLearner(<span class="string">"classif.xgboost"</span>,predict.type = <span class="string">"response"</span>)</span><br><span class="line">&gt; xgb_learner$par.vals &lt;- list(</span><br><span class="line">+   objective = <span class="string">"binary:logistic"</span>,</span><br><span class="line">+   eval_metric = <span class="string">"error"</span>,</span><br><span class="line">+   nrounds = <span class="number">150</span>,</span><br><span class="line">+   print.every.n = <span class="number">50</span>)</span><br><span class="line">&gt; xg_ps &lt;- makeParamSet( </span><br><span class="line">+   makeIntegerParam(<span class="string">"max_depth"</span>,lower=<span class="number">3</span>,upper=<span class="number">10</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"lambda"</span>,lower=<span class="number">0.05</span>,upper=<span class="number">0.5</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"eta"</span>, lower = <span class="number">0.01</span>, upper = <span class="number">0.5</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"subsample"</span>, lower = <span class="number">0.50</span>, upper = <span class="number">1</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"min_child_weight"</span>,lower=<span class="number">2</span>,upper=<span class="number">10</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"colsample_bytree"</span>,lower = <span class="number">0.50</span>,upper = <span class="number">0.80</span>))</span><br><span class="line">&gt; rancontrol &lt;- makeTuneControlRandom(maxit = <span class="number">5L</span>) <span class="comment">#do 5 iterations</span></span><br><span class="line">&gt; set_cv &lt;- makeResampleDesc(<span class="string">"CV"</span>,iters = <span class="number">5L</span>,stratify = <span class="literal">TRUE</span>)</span><br><span class="line">&gt; <span class="keyword">library</span>(parallel)</span><br><span class="line">&gt; <span class="keyword">library</span>(parallelMap)</span><br><span class="line">&gt; parallelStartSocket(cpus = detectCores())</span><br><span class="line">Starting parallelization <span class="keyword">in</span> mode=socket with cpus=<span class="number">4.</span></span><br><span class="line">&gt; xgb_tune &lt;- tuneParams(learner = xgb_learner, task = train_task, resampling = set_cv, </span><br><span class="line">+                        measures = list(acc,tpr,tnr,fpr,fp,fn), par.set = xg_ps, </span><br><span class="line">+                        control = rancontrol)</span><br><span class="line">[Tune] Started tuning learner classif.xgboost <span class="keyword">for</span> parameter set:</span><br><span class="line">                    Type len Def      Constr Req Tunable Trafo</span><br><span class="line">max_depth        integer   -   -     <span class="number">3</span> to <span class="number">10</span>   -    <span class="literal">TRUE</span>     -</span><br><span class="line">lambda           numeric   -   - <span class="number">0.05</span> to <span class="number">0.5</span>   -    <span class="literal">TRUE</span>     -</span><br><span class="line">eta              numeric   -   - <span class="number">0.01</span> to <span class="number">0.5</span>   -    <span class="literal">TRUE</span>     -</span><br><span class="line">subsample        numeric   -   -    <span class="number">0.5</span> to <span class="number">1</span>   -    <span class="literal">TRUE</span>     -</span><br><span class="line">min_child_weight numeric   -   -     <span class="number">2</span> to <span class="number">10</span>   -    <span class="literal">TRUE</span>     -</span><br><span class="line">colsample_bytree numeric   -   -  <span class="number">0.5</span> to <span class="number">0.8</span>   -    <span class="literal">TRUE</span>     -</span><br><span class="line">With control class: TuneControlRandom</span><br><span class="line">Imputation value: -0Imputation value: -0Imputation value: -0Imputation value: 1Imputation value: InfImputation value: <span class="literal">Inf</span></span><br><span class="line">Exporting objects to slaves <span class="keyword">for</span> mode socket: .mlr.slave.options</span><br><span class="line">Mapping <span class="keyword">in</span> parallel: mode = socket; cpus = <span class="number">4</span>; elements = <span class="number">5.</span></span><br><span class="line">[Tune] Result: max_depth=<span class="number">5</span>; lambda=<span class="number">0.171</span>; eta=<span class="number">0.295</span>; subsample=<span class="number">0.855</span>; min_child_weight=<span class="number">5.54</span>; colsample_bytree=<span class="number">0.735</span> : acc.test.mean=<span class="number">0.958</span>,tpr.test.mean=<span class="number">0.989</span>,tnr.test.mean=<span class="number">0.482</span>,fpr.test.mean=<span class="number">0.518</span>,fp.test.mean=<span class="number">1.28e+03</span>,fn.test.mean= <span class="number">413</span></span><br><span class="line">&gt; xgb_tune$y</span><br><span class="line">acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean </span><br><span class="line">    <span class="number">0.9575036</span>     <span class="number">0.9889762</span>     <span class="number">0.4818275</span>     <span class="number">0.5181725</span>  <span class="number">1283.2000000</span>   <span class="number">412.6000000</span> </span><br><span class="line">&gt; xgb_tune$x</span><br><span class="line">$max_depth</span><br><span class="line">[<span class="number">1</span>] <span class="number">5</span></span><br><span class="line"></span><br><span class="line">$lambda</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.1711398</span></span><br><span class="line"></span><br><span class="line">$eta</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.295421</span></span><br><span class="line"></span><br><span class="line">$subsample</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.8545802</span></span><br><span class="line"></span><br><span class="line">$min_child_weight</span><br><span class="line">[<span class="number">1</span>] <span class="number">5.541689</span></span><br><span class="line"></span><br><span class="line">$colsample_bytree</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.7345529</span></span><br></pre></td></tr></table></figure>
<p><code>xgb_tune$x</code>查看参数调节得出的最优结果，将最优参数设定在模型<code>xgb_new</code>中，然后进行训练，这时便出现了我们前面提到的错误<code>unique() applies only to vectors</code>（当然github项目上给出的代码已经修正了）。出现这个错误之后，刚开始并不清楚原因在哪个地方，在下面的代码执行日志中可以发现我在不停地重新赋值再训练还有重新创建任务（因为我之前在R中遇到过将同一段代码先后两次执行，第一次错误，第二次却成功的情况），来来回回尝试了十几次，直到后来在github找到关于这条错误信息的issue，原来是caret和mlr的加载顺序弄错了。然后，用<code>detach(&quot;package:caret&quot;)</code>和<code>detach(&quot;package:mlr&quot;)</code>命令先将两个包移除，再按照先加载caret后加载mlr的顺序，最后再重新赋值训练，成功。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&gt; xgb_new &lt;- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgb_model &lt;- train(learner = xgb_new, task = train_task)</span><br><span class="line">Error <span class="keyword">in</span> train.default(learner = xgb_new, task = train_task) : </span><br><span class="line">  argument <span class="string">"y"</span> is missing, with no default</span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgb_model &lt;- train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; rm(xgb_new)</span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgb_model &lt;- train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_tune$y</span><br><span class="line">acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean </span><br><span class="line">    <span class="number">0.9575036</span>     <span class="number">0.9889762</span>     <span class="number">0.4818275</span>     <span class="number">0.5181725</span>  <span class="number">1283.2000000</span>   <span class="number">412.6000000</span> </span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgb_model &lt;- train(learner = xgb_new, task = train_task)</span><br><span class="line">Error <span class="keyword">in</span> train.default(learner = xgb_new, task = train_task) : </span><br><span class="line">  argument <span class="string">"y"</span> is missing, with no default</span><br><span class="line">&gt; xgb_model &lt;- train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_tune$y</span><br><span class="line">acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean </span><br><span class="line">    <span class="number">0.9575036</span>     <span class="number">0.9889762</span>     <span class="number">0.4818275</span>     <span class="number">0.5181725</span>  <span class="number">1283.2000000</span>   <span class="number">412.6000000</span> </span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgmodel &lt;- train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_tune</span><br><span class="line">Tune result:</span><br><span class="line">Op. pars: max_depth=<span class="number">5</span>; lambda=<span class="number">0.171</span>; eta=<span class="number">0.295</span>; subsample=<span class="number">0.855</span>; min_child_weight=<span class="number">5.54</span>; colsample_bytree=<span class="number">0.735</span></span><br><span class="line">acc.test.mean=<span class="number">0.958</span>,tpr.test.mean=<span class="number">0.989</span>,tnr.test.mean=<span class="number">0.482</span>,fpr.test.mean=<span class="number">0.518</span>,fp.test.mean=<span class="number">1.28e+03</span>,fn.test.mean= <span class="number">413</span></span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgmodel &lt;- train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(makeLearner(<span class="string">"classif.xgboost"</span>), par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgmodel &lt;- train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_new</span><br><span class="line">Learner classif.xgboost from package xgboost</span><br><span class="line">Type: classif</span><br><span class="line">Name: eXtreme Gradient Boosting; Short name: xgboost</span><br><span class="line">Class: classif.xgboost</span><br><span class="line">Properties: twoclass,multiclass,numerics,prob,weights,missings,featimp</span><br><span class="line">Predict-Type: response</span><br><span class="line">Hyperparameters: nrounds=<span class="number">1</span>,verbose=<span class="number">0</span>,max_depth=<span class="number">5</span>,lambda=<span class="number">0.171</span>,eta=<span class="number">0.295</span>,subsample=<span class="number">0.855</span>,min_child_weight=<span class="number">5.54</span>,colsample_bytree=<span class="number">0.735</span></span><br><span class="line"></span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_learner &lt;- makeLearner(<span class="string">"classif.xgboost"</span>,predict.type = <span class="string">"response"</span>)</span><br><span class="line">&gt; xgb_learner$par.vals &lt;- list(</span><br><span class="line">+   objective = <span class="string">"binary:logistic"</span>,</span><br><span class="line">+   eval_metric = <span class="string">"error"</span>,</span><br><span class="line">+   nrounds = <span class="number">150</span>,</span><br><span class="line">+   print.every.n = <span class="number">50</span>)</span><br><span class="line">&gt; xg_ps &lt;- makeParamSet( </span><br><span class="line">+   makeIntegerParam(<span class="string">"max_depth"</span>,lower=<span class="number">3</span>,upper=<span class="number">10</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"lambda"</span>,lower=<span class="number">0.05</span>,upper=<span class="number">0.5</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"eta"</span>, lower = <span class="number">0.01</span>, upper = <span class="number">0.5</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"subsample"</span>, lower = <span class="number">0.50</span>, upper = <span class="number">1</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"min_child_weight"</span>,lower=<span class="number">2</span>,upper=<span class="number">10</span>),</span><br><span class="line">+   makeNumericParam(<span class="string">"colsample_bytree"</span>,lower = <span class="number">0.50</span>,upper = <span class="number">0.80</span>))</span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; train_task &lt;- makeClassifTask(data = train, target = <span class="string">"income_level"</span>)</span><br><span class="line">Warning <span class="keyword">in</span> makeTask(type = type, data = data, weights = weights, blocking = blocking,  :</span><br><span class="line">  Provided data is not a pure data.frame but from class data.table, hence it will be converted.</span><br><span class="line">&gt; test_task &lt;- makeClassifTask(data = test, target = <span class="string">"income_level"</span>)</span><br><span class="line">Warning <span class="keyword">in</span> makeTask(type = type, data = data, weights = weights, blocking = blocking,  :</span><br><span class="line">  Provided data is not a pure data.frame but from class data.table, hence it will be converted.</span><br><span class="line">&gt; train_task &lt;- createDummyFeatures(obj = train_task)</span><br><span class="line">&gt; test_task &lt;- createDummyFeatures(obj = test_task)</span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgb_new &lt;- setHyperPars(xgb_learner, par.vals = xgb_tune$x)</span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; <span class="keyword">library</span>(caret)</span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; xgmodel = caret::train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; <span class="keyword">library</span>(caret)</span><br><span class="line">&gt; <span class="keyword">library</span>(data.table)</span><br><span class="line">&gt; <span class="keyword">library</span>(mlr)</span><br><span class="line">&gt; <span class="keyword">library</span>(xgboost)</span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">Error <span class="keyword">in</span> unique.default(x, nmax = nmax) : </span><br><span class="line">  unique() applies only to vectors</span><br><span class="line">&gt; (packages())</span><br><span class="line">Error: could not find <span class="keyword">function</span> <span class="string">"packages"</span></span><br><span class="line">&gt; (.packages())</span><br><span class="line"> [<span class="number">1</span>] <span class="string">"randomForest"</span> <span class="string">"parallelMap"</span>  <span class="string">"parallel"</span>     <span class="string">"caret"</span>        <span class="string">"ggplot2"</span>      <span class="string">"lattice"</span>      <span class="string">"xgboost"</span>     </span><br><span class="line"> [<span class="number">8</span>] <span class="string">"mlr"</span>          <span class="string">"ParamHelpers"</span> <span class="string">"data.table"</span>   <span class="string">"stats"</span>        <span class="string">"graphics"</span>     <span class="string">"grDevices"</span>    <span class="string">"utils"</span>       </span><br><span class="line">[<span class="number">15</span>] <span class="string">"datasets"</span>     <span class="string">"methods"</span>      <span class="string">"base"</span>        </span><br><span class="line">&gt; <span class="keyword">detach</span>(<span class="string">"package:caret"</span>)</span><br><span class="line">&gt; <span class="keyword">detach</span>(<span class="string">"package:mlr"</span>)</span><br><span class="line">&gt; (.packages())</span><br><span class="line"> [<span class="number">1</span>] <span class="string">"randomForest"</span> <span class="string">"parallelMap"</span>  <span class="string">"parallel"</span>     <span class="string">"ggplot2"</span>      <span class="string">"lattice"</span>      <span class="string">"xgboost"</span>      <span class="string">"ParamHelpers"</span></span><br><span class="line"> [<span class="number">8</span>] <span class="string">"data.table"</span>   <span class="string">"stats"</span>        <span class="string">"graphics"</span>     <span class="string">"grDevices"</span>    <span class="string">"utils"</span>        <span class="string">"datasets"</span>     <span class="string">"methods"</span>     </span><br><span class="line">[<span class="number">15</span>] <span class="string">"base"</span>        </span><br><span class="line">&gt; <span class="keyword">library</span>(caret)</span><br><span class="line">&gt; <span class="keyword">library</span>(mlr)</span><br><span class="line"></span><br><span class="line">载入程辑包：‘mlr’</span><br><span class="line"></span><br><span class="line">The following object is masked from ‘package:caret’:</span><br><span class="line"></span><br><span class="line">    train</span><br><span class="line"></span><br><span class="line">Warning message:</span><br><span class="line">程辑包‘mlr’是用R版本<span class="number">3.3</span><span class="number">.3</span> 来建造的 </span><br><span class="line">&gt; xgmodel = train(xgb_new, train_task)</span><br><span class="line">[<span class="number">1</span>]	train-error:<span class="number">0.050866</span> </span><br><span class="line">[<span class="number">51</span>]	train-error:<span class="number">0.041344</span> </span><br><span class="line">[<span class="number">101</span>]	train-error:<span class="number">0.039279</span> </span><br><span class="line">[<span class="number">150</span>]	train-error:<span class="number">0.037895</span> </span><br><span class="line">Warning message:</span><br><span class="line"><span class="string">'print.every.n'</span> is deprecated.</span><br><span class="line">Use <span class="string">'print_every_n'</span> instead.</span><br><span class="line">See help(<span class="string">"Deprecated"</span>) and help(<span class="string">"xgboost-deprecated"</span>).</span><br></pre></td></tr></table></figure>
<p>经历了千辛万苦，模型终于训练好了，胜利的曙光似乎就在前方，终于可以进行预测了！然而，猝不及防，正当我们将测试集的<code>income_level</code>与<code>xgb_prediction</code>进行对比时，an error thrown again，这次是<code>The data contain levels not found in the data.</code>。错误信息直接翻译过来的意思是数据中包含levels not found，分别查看预测结果<code>xgb_prediction</code>与<code>test$income_level</code>，发现原来是两者的标签设置不一样，<code>xgb_prediction</code>预测的结果是<code>-50000</code>和<code>+50000</code>两种，而原测试集目标变量<code>test$income_level</code>的标签是<code>-50000</code>和<code>50000+.</code>两个level，标签不同自然无法比较。</p>
<p>解决办法也挺简单，执行<code>test[,income_level:= ifelse(income_level == &quot;-50000&quot;,&quot;-50000&quot;,&quot;+50000&quot;)]</code>将<code>50000+.</code>替换为<code>+50000</code>即可。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br></pre></td><td class="code"><pre><span class="line">&gt; predict_xgb &lt;- predict(xgmodel, test_task)</span><br><span class="line">&gt; xgb_prediction &lt;- predict_xgb$data$response</span><br><span class="line">&gt; confusionMatrix(test$income_level, xgb_prediction)</span><br><span class="line">Error <span class="keyword">in</span> confusionMatrix.default(test$income_level, xgb_prediction) : </span><br><span class="line">  The data contain levels not found <span class="keyword">in</span> the data.</span><br><span class="line">&gt; xgb_prediction</span><br><span class="line">   [<span class="number">1</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line">  [<span class="number">16</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span></span><br><span class="line">  [<span class="number">31</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line">  [<span class="number">46</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line">  [<span class="number">61</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line">  [<span class="number">76</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line">  [<span class="number">91</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">106</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">121</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">136</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">151</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">166</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">181</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">196</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">211</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">226</span>] +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">241</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">256</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span></span><br><span class="line"> [<span class="number">271</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">286</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">301</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">316</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">331</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">346</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">361</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">376</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">391</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">406</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">421</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">436</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">451</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">466</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">481</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">496</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">511</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">526</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">541</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">556</span>] -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">571</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">586</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">601</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">616</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">631</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">646</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">661</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">676</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">691</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">706</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">721</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">736</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">751</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">766</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">781</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">796</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">811</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">826</span>] -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">841</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">856</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">871</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">886</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span></span><br><span class="line"> [<span class="number">901</span>] +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">916</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">931</span>] +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">946</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">961</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">976</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [<span class="number">991</span>] -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> +<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span> -<span class="number">50000</span></span><br><span class="line"> [ reached getOption(<span class="string">"max.print"</span>) -- omitted <span class="number">98762</span> entries ]</span><br><span class="line">Levels: -<span class="number">50000</span> +<span class="number">50000</span></span><br><span class="line">&gt; confusionMatrix(test$income_level, xgb_prediction)</span><br><span class="line">Error <span class="keyword">in</span> confusionMatrix.default(test$income_level, xgb_prediction) : </span><br><span class="line">  The data contain levels not found <span class="keyword">in</span> the data.</span><br><span class="line">&gt; confusionMatrix(xgb_prediction$data$response,xgb_prediction$data$truth)</span><br><span class="line">Error <span class="keyword">in</span> xgb_prediction$data : $ operator is invalid <span class="keyword">for</span> atomic vectors</span><br><span class="line">&gt; xg_confused &lt;- confusionMatrix(test$income_level,xgb_prediction)</span><br><span class="line">Error <span class="keyword">in</span> confusionMatrix.default(test$income_level, xgb_prediction) : </span><br><span class="line">  The data contain levels not found <span class="keyword">in</span> the data.</span><br><span class="line">&gt; test$income_level</span><br><span class="line">   [<span class="number">1</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line">  [<span class="number">14</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line">  [<span class="number">27</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+.</span><br><span class="line">  [<span class="number">40</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line">  [<span class="number">53</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line">  [<span class="number">66</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line">  [<span class="number">79</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line">  [<span class="number">92</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">105</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">118</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">131</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">144</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">157</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">170</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">183</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">196</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">209</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">222</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">235</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">248</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">261</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">274</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">287</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">300</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">313</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">326</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">339</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">352</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">365</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">378</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">391</span>] <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">404</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">417</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">430</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">443</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">456</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">469</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">482</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">495</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">508</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">521</span>] -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+.</span><br><span class="line"> [<span class="number">534</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">547</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">560</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">573</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">586</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">599</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">612</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">625</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">638</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">651</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">664</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">677</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">690</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">703</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">716</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">729</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">742</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">755</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">768</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">781</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">794</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+.</span><br><span class="line"> [<span class="number">807</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">820</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">833</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">846</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">859</span>] -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+.</span><br><span class="line"> [<span class="number">872</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">885</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">898</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">911</span>] -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">924</span>] <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">937</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">950</span>] <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">963</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">976</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [<span class="number">989</span>] -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  <span class="number">50000</span>+. -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span>  -<span class="number">50000</span> </span><br><span class="line"> [ reached getOption(<span class="string">"max.print"</span>) -- omitted <span class="number">98762</span> entries ]</span><br><span class="line">Levels: -<span class="number">50000</span> <span class="number">50000</span>+.</span><br><span class="line">&gt; test[,income_level:= ifelse(income_level == <span class="string">"-50000"</span>,<span class="string">"-50000"</span>,<span class="string">"+50000"</span>)]</span><br><span class="line">&gt; test$income_level</span><br><span class="line">   [<span class="number">1</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">12</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">23</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">34</span>] <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">45</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">56</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">67</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">78</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line">  [<span class="number">89</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">100</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">111</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">122</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">133</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">144</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">155</span>] <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">166</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">177</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">188</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">199</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">210</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">221</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">232</span>] <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">243</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">254</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">265</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">276</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">287</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">298</span>] <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">309</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">320</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">331</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">342</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">353</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">364</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">375</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">386</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">397</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">408</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">419</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">430</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">441</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">452</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span></span><br><span class="line"> [<span class="number">463</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">474</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span></span><br><span class="line"> [<span class="number">485</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">496</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">507</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">518</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">529</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">540</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">551</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">562</span>] <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">573</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">584</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">595</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">606</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">617</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span></span><br><span class="line"> [<span class="number">628</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">639</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">650</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">661</span>] <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">672</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">683</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">694</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">705</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">716</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">727</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">738</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">749</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">760</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">771</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">782</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">793</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">804</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">815</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">826</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">837</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">848</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">859</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">870</span>] <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">881</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">892</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">903</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">914</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span></span><br><span class="line"> [<span class="number">925</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">936</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">947</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">958</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">969</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">980</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [<span class="number">991</span>] <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"+50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span> <span class="string">"-50000"</span></span><br><span class="line"> [ reached getOption(<span class="string">"max.print"</span>) -- omitted <span class="number">98762</span> entries ]</span><br><span class="line">&gt; xg_confused &lt;- confusionMatrix(test$income_level,xgb_prediction)</span><br><span class="line">&gt; xg_confused</span><br><span class="line">Confusion Matrix and Statistics</span><br><span class="line"></span><br><span class="line">          Reference</span><br><span class="line">Prediction -<span class="number">50000</span> +<span class="number">50000</span></span><br><span class="line">    -<span class="number">50000</span>  <span class="number">92699</span>    <span class="number">877</span></span><br><span class="line">    +<span class="number">50000</span>   <span class="number">3433</span>   <span class="number">2753</span></span><br><span class="line">                                          </span><br><span class="line">               Accuracy : <span class="number">0.9568</span>          </span><br><span class="line">                 <span class="number">95</span>% CI : (<span class="number">0.9555</span>, <span class="number">0.9581</span>)</span><br><span class="line">    No Information Rate : <span class="number">0.9636</span>          </span><br><span class="line">    P-Value [Acc &gt; NIR] : <span class="number">1</span>               </span><br><span class="line">                                          </span><br><span class="line">                  Kappa : <span class="number">0.5398</span>          </span><br><span class="line"> Mcnemar<span class="string">'s Test P-Value : &lt;2e-16          </span></span><br><span class="line"><span class="string">                                          </span></span><br><span class="line"><span class="string">            Sensitivity : 0.9643          </span></span><br><span class="line"><span class="string">            Specificity : 0.7584          </span></span><br><span class="line"><span class="string">         Pos Pred Value : 0.9906          </span></span><br><span class="line"><span class="string">         Neg Pred Value : 0.4450          </span></span><br><span class="line"><span class="string">             Prevalence : 0.9636          </span></span><br><span class="line"><span class="string">         Detection Rate : 0.9292          </span></span><br><span class="line"><span class="string">   Detection Prevalence : 0.9380          </span></span><br><span class="line"><span class="string">      Balanced Accuracy : 0.8613          </span></span><br><span class="line"><span class="string">                                          </span></span><br><span class="line"><span class="string">       '</span>Positive<span class="string">' Class : -50000</span></span><br></pre></td></tr></table></figure>
<p>查看模糊矩阵得到的结果，模型准确率达到95.68%，并且特异度（Specificity），也就是对负样本的预测准确率达到75.84%，可以说，已经非常不错了！至此，UCI人口调查数据的折腾就暂时告一段落了，如果有时间我还会继续发表研究这个数据以及学习xgboost的心得！</p>
<p>（完）</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li>关于xgboost不接受字符型变量的讨论：<a href="https://github.com/dmlc/xgboost/issues/95" target="_blank" rel="noopener">Factors #95</a></li>
<li>关于出现<code>unique() applies only to vectors</code>错误的讨论：<a href="https://github.com/mlr-org/mlr/issues/1407" target="_blank" rel="noopener">Error in unique.default(x, nmax = nmax) : unique() applies only to vectors #1407</a>；<a href="https://github.com/mlr-org/mlr/issues/1418" target="_blank" rel="noopener">Error in makeParamSet when tuning hyperparameters of nnet #1418</a></li>
<li>mlr入门教程：<a href="http://mlr-org.github.io/mlr-tutorial/devel/html/index.html" target="_blank" rel="noopener">Machine Learning in R: mlr Tutorial</a></li>
<li><a href="http://xgboost.readthedocs.io/en/latest//get_started/index.html#r" target="_blank" rel="noopener">Get Started with XGBoost in R </a></li>
<li>在R语言中针对初学者的xgboost和调参教程：<a href="https://www.hackerearth.com/practice/machine-learning/machine-learning-algorithms/beginners-tutorial-on-xgboost-parameter-tuning-r/tutorial/" target="_blank" rel="noopener">Beginners Tutorial on XGBoost and Parameter Tuning in R</a></li>
<li>知乎专栏：<a href="https://zhuanlan.zhihu.com/p/25595297" target="_blank" rel="noopener">强大的机器学习专属R包——mlr包</a></li>
<li><a href="https://mlr-org.github.io/mlr-tutorial/release/html/over_and_undersampling/index.html" target="_blank" rel="noopener">mlr-tutorial:Imbalanced Classification Problems</a></li>
</ol>

      
    </div>

    <div>
        
            <div>
    
        <div style="text-align:center;color: #FF0000;font-size:18px;font-family:Helvetica;font-style:oblique">------本文结束，欢迎收藏本站、分享、评论或联系作者！------</div>
    
</div>

        
    </div>

    <!-- 相关文章推荐 -->
     
          

  <div class="popular-posts-header">
    <i class="fa fa-"></i>
    相关文章
  </div>

 <details>
     <summary>点击查看</summary>
     <ul class="popular-posts">
     
       <li class="popular-posts-item">
         
         
         <div class="popular-posts-title"><a href="\2017\R-imbalanced-data-1\" rel="bookmark">处理不平衡数据——基于UCI人口调查数据集（一）</a></div>
         
       </li>
     
       <li class="popular-posts-item">
         
         
         <div class="popular-posts-title"><a href="\2016\2016-11-13-R-basic-use-installation-workspace-packages\" rel="bookmark">R使用笔记（1）R语言基本操作：安装、工作空间、包</a></div>
         
       </li>
     
       <li class="popular-posts-item">
         
         
         <div class="popular-posts-title"><a href="\2016\2016-11-13-R-data-structure\" rel="bookmark">R使用笔记（2）数据结构</a></div>
         
       </li>
     
       <li class="popular-posts-item">
         
         
         <div class="popular-posts-title"><a href="\2016\2016-11-19-R-data-input\" rel="bookmark">R使用笔记（3）数据导入</a></div>
         
       </li>
     
       <li class="popular-posts-item">
         
         
         <div class="popular-posts-title"><a href="\2017\machine-learning-algorithm-series-svd\" rel="bookmark">机器学习算法系列（12）奇异值分解——以图像压缩为例</a></div>
         
       </li>
     
     </ul>
 </details>


     

    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center; color:red;font-family:Helvetica;font-style:oblique">
  <div>赠人玫瑰 手有余香</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://raw.githubusercontent.com/swordspoet/i/img/WeChatpay.png" alt="H4ck3r L1 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://raw.githubusercontent.com/swordspoet/i/img/778d5ca9gy1fjuvo2ur08j20a20a2dgi.jpg" alt="H4ck3r L1 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>H4ck3r L1</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://www.libinx.com/2017/R-imbalanced-data-2/" title="处理不平衡数据——基于UCI人口调查数据集（二）">https://www.libinx.com/2017/R-imbalanced-data-2/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据分析/" rel="tag"># 数据分析</a>
          
            <a href="/tags/R/" rel="tag"># R</a>
          
            <a href="/tags/机器学习/" rel="tag"># 机器学习</a>
          
            <a href="/tags/Machine-Learning/" rel="tag"># Machine-Learning</a>
          
            <a href="/tags/xgboost/" rel="tag"># xgboost</a>
          
            <a href="/tags/mlr/" rel="tag"># mlr</a>
          
            <a href="/tags/UCI/" rel="tag"># UCI</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        
          <div class="wp_rating">
           <div style="color: rgba(0, 0, 0, 0.75); font-size:13px; letter-spacing:3px">(&gt;看完记得五星好评哦亲&lt;)</div>
            <div id="wpac-rating"></div>
          </div>
        

        

        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/spending-13-tomatoes-getting-sql-done/" rel="next" title="13个“番茄”搞定SQL">
                <i class="fa fa-chevron-left"></i> 13个“番茄”搞定SQL
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/five-steps-win10-ubuntu-dual-boot/" rel="prev" title="五步完美实现Win10 + Ubuntu 17.04双系统启动">
                五步完美实现Win10 + Ubuntu 17.04双系统启动 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox">
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58b8f4ff1eb11c7e" async="async"></script>
</div>

      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">H4ck3r L1</p>
              <p class="site-description motion-element" itemprop="description">专注机器学习、大数据</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">154</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">311</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/swordspoet" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.douban.com/people/53382901/" target="_blank" title="douban" rel="external nofollow"><i class="fa fa-fw fa-book"></i>douban</a>
                  
                </span>
              
            </div>
          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons">
              </a>
            </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友链
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://plushunter.github.io" title="Free will" target="_blank">Free will</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.shuang0420.com" title="徐阿衡" target="_blank">徐阿衡</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://dzzxjl.github.io/" title="十一城" target="_blank">十一城</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://iyaozhen.com" title="yao zhen" target="_blank">yao zhen</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://kba977.github.io/" title="kba977" target="_blank">kba977</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.jianshu.com/u/4007ac46018d" title="Babyzpj" target="_blank">Babyzpj</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://null.w0x7ce.com/" title="w0x7ce" target="_blank">w0x7ce</a>
                  </li>
                
              </ul>
            </div>
			<div class="theme-info">
				<span class="post-count">全站共211.1k字</span>
			</div>
			
			

          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、初次尝试xgboost"><span class="nav-text">一、初次尝试xgboost</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#xgboost模型参数解释与设定"><span class="nav-text">xgboost模型参数解释与设定</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、xgboost-in-mlr"><span class="nav-text">二、xgboost in mlr</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据预处理"><span class="nav-text">数据预处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调参与模型训练"><span class="nav-text">调参与模型训练</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考链接"><span class="nav-text">参考链接</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      
	  
	  <div class="wechat_OA">
				<span>欢迎关注我的公众号</span>
				<br>
				<!-- 这里添加你的二维码图片 -->
				<img src="https://raw.githubusercontent.com/swordspoet/i/img/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png">
			</div>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="contact">
<span class="fa-stack fa-lg">
  <a href="https://www.github.com/swordspoet">
  <i class="fa fa-square fa-stack-2x"></i>
  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
  </a>
</span>

<span class="fa-stack fa-lg">
<a href="https://zhuanlan.zhihu.com/libinx">
  <i class="fa fa-square fa-stack-2x"></i>
  <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
  </a>
</span>

<span class="fa-stack fa-lg">
<a href="mailto:libin.data@gmail.com">
  <i class="fa fa-square fa-stack-2x"></i>
  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
  </a>
</span>

<span class="fa-stack fa-lg">
<a href="https://t.me/bin_li">
  <i class="fa fa-square fa-stack-2x"></i>
  <i class="fa fa-telegram fa-stack-1x fa-inverse"></i>
  </a>
</span>

</div>

<div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-cogs"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">All Rights Reserved.</span>

  

  
</div>
	

  









        
<div class="busuanzi-count">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  





  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  

  


  
  
  <script type="text/javascript">
  wpac_init = window.wpac_init || [];
  wpac_init.push({widget: 'Rating', id: 8151,
    el: 'wpac-rating',
    color: 'ff7600'
  });
  (function() {
    if ('WIDGETPACK_LOADED' in window) return;
    WIDGETPACK_LOADED = true;
    var mc = document.createElement('script');
    mc.type = 'text/javascript';
    mc.async = true;
    mc.src = '//embed.widgetpack.com/widget.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
  })();
  </script>


  
  
  
    
  
  <script src="https://cdn.bootcss.com/pangu/3.3.0/pangu.js"></script>
  <script type="text/javascript">pangu.spacingPage();</script>


  

  
  <script type="text/javascript" src="/js/src/exturl.js?v=6.3.0"></script>


  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


</body>
</html>
